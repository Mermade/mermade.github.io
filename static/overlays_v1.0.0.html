<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><title>OpenAPI Specification vundefined | Introduction, Definitions, &amp; More</title><meta name="description" content="The OpenAPI Specification (OAS) defines a standard, programming language-agnostic interface description for HTTP APIs."><link rel="canonical" href="https://spec.openapis.org/oas/latest.html" /><script src="./js/respec-oai.js" class="remove"></script><script class="remove">var respecConfig = {"specStatus":"base","editors":[{"name":"Darrel Miller "},{"name":"Jeremy Whitlock "},{"name":"Marsh Gardiner "},{"name":"Mike Ralphson "},{"name":"Ron Ratovsky "},{"name":"Uri Sarid "}],"formerEditors":[{"name":"Jason Harmon "},{"name":"Tony Tam "}],"publishDate":"2021-07-06T08:57:56.103Z","subtitle":"Version undefined","processVersion":2017,"edDraftURI":"https://github.com/OAI/OpenAPI-Specification/","github":{"repoURL":"https://github.com/OAI/OpenAPI-Specification/","branch":"master"},"shortName":"OAS","noTOC":false,"lint":false,"additionalCopyrightHolders":"the Linux Foundation","includePermalinks":true};</script><!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-831873-42"></script>
<script>
 window.dataLayer = window.dataLayer || [];
 function gtag(){dataLayer.push(arguments);}
 gtag('js', new Date());
 gtag('config', 'UA-831873-42');
</script>
</head><body><style>#respec-ui { visibility: hidden; }h1,h2,h3 { color: #629b34; }a[href] { color: #45512c; }body:not(.toc-inline) #toc h2 { color: #45512c; }table { display: block; width: 100%; overflow: auto; }table th { font-weight: 600; }table th, table td { padding: 6px 13px; border: 1px solid #dfe2e5; }table tr { background-color: #fff; border-top: 1px solid #c6cbd1; }table tr:nth-child(2n) { background-color: #f6f8fa; }pre { background-color: #f6f8fa !important; }/**  * GitHub Gist Theme  * Author : Louis Barranqueiro - https://github.com/LouisBarranqueiro  */  .hljs {   display: block;   background: white;   padding: 0.5em;   color: #333333;   overflow-x: auto; }  .hljs-comment, .hljs-meta {   color: #969896; }  .hljs-string, .hljs-variable, .hljs-template-variable, .hljs-strong, .hljs-emphasis, .hljs-quote {   color: #df5000; }  .hljs-keyword, .hljs-selector-tag, .hljs-type {   color: #a71d5d; }  .hljs-literal, .hljs-symbol, .hljs-bullet, .hljs-attribute {   color: #0086b3; }  .hljs-section, .hljs-name {   color: #63a35c; }  .hljs-tag {   color: #333333; }  .hljs-title, .hljs-attr, .hljs-selector-id, .hljs-selector-class, .hljs-selector-attr, .hljs-selector-pseudo {   color: #795da3; }  .hljs-addition {   color: #55a532;   background-color: #eaffea; }  .hljs-deletion {   color: #bd2c00;   background-color: #ffecec; }  .hljs-link {   text-decoration: underline; } </style><h1 id="title">OpenAPI Specification vundefined </h1><section id="abstract" title="What is the OpenAPI Specification?">The OpenAPI Specification (OAS) defines a standard, programming language-agnostic interface description for HTTP APIs, which allows both humans and computers to discover and understand the capabilities of a service without requiring access to source code, additional documentation, or inspection of network traffic. When properly defined via OpenAPI, a consumer can understand and interact with the remote service with a minimal amount of implementation logic. Similar to what interface descriptions have done for lower-level programming, the OpenAPI Specification removes guesswork in calling a service.</section><section class="notoc" id="sotd"><h2>Status of This Document</h2>The source-of-truth for the specification is the GitHub markdown file referenced above.</section>
<section><h1>Overlay Specification</h1>
<section><h3>Version 1.0.0</h3>
<p>The key words “MUST”, “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”, “SHOULD NOT”, “RECOMMENDED”, “NOT RECOMMENDED”, “MAY”, and “OPTIONAL” in this document are to be interpreted as described in <a href="https://tools.ietf.org/html/bcp14">BCP 14</a> [[!RFC2119]] [[!RFC8174]] when, and only when, they appear in all capitals, as shown here.</p>
<p>This document is licensed under <a href="https://www.apache.org/licenses/LICENSE-2.0.html">The Apache License, Version 2.0</a>.</p>
</section></section></section><section><h1>Introduction</h1>
<p>TBD</p>
</section><section><h1><dfn>Definitions</dfn></h1>
<section><h4><span id="overlayDocument"><dfn>Overlay Document</dfn></span></h4>
<p>An overlay document contains an ordered list of <a href="#overlayUpdates">Update Objects</a> that are to be applied to the target document. Each <a href="#updateObject">Update Object</a> has a <code>target</code> property and a modifier type (add, merge, remove).  The <code>target</code> property is a <a href="http://jmespath.org/specification.html">JMESPath</a> query that identifies what part of the target document is to be updated and the modifier determines the change.</p>
</section></section></section></section><section><h1>Specification</h1>
<section><h2>Versions</h2>
<p>TBD</p>
</section><section><h2>Format</h2>
<p>An Overlay document that conforms to the Overlay Specification is itself a JSON object, which may be represented either in JSON or YAML format.</p>
<p>All field names in the specification are <strong>case sensitive</strong>.
This includes all fields that are used as keys in a map, except where explicitly noted that keys are <strong>case insensitive</strong>.</p>
<p>In order to preserve the ability to round-trip between YAML and JSON formats, YAML version <a href="https://yaml.org/spec/1.2/spec.html">1.2</a> is RECOMMENDED along with some additional constraints:</p>
<ul>
<li>Tags MUST be limited to those allowed by the <a href="https://yaml.org/spec/1.2/spec.html#id2803231">JSON Schema ruleset</a>.</li>
<li>Keys used in YAML maps MUST be limited to a scalar string, as defined by the <a href="https://yaml.org/spec/1.2/spec.html#id2802346">YAML Failsafe schema ruleset</a>.</li>
</ul>
</section><section><h2><span id="documentStructure">Document Structure</span></h2>
<p>It is RECOMMENDED that the root Overlay document be named: TBD.</p>
</section><section><h2><span id="dataTypes">Data Types</span></h2>
<p>TBD</p>
</section><section><h2><span id="relativeReferencesURL">Relative References in URLs</span></h2>
<p>Unless specified otherwise, all properties that are URLs MAY be relative references as defined by [[!RFC3986]].
*** Unless specified otherwise, relative references are resolved using the URLs defined in the <a href="#serverObject"><code>Server Object</code></a> as a Base URL. Note that these themselves MAY be relative to the referring document.</p>
</section><section><h2>Schema</h2>
<p>In the following description, if a field is not explicitly <strong>REQUIRED</strong> or described with a MUST or SHALL, it can be considered OPTIONAL.</p>
<section><h3><span id="overlayObject">Overlay Object</span></h3>
<p>This is the root object of the <a href="#overlayDocument">Overlay document</a>.</p>
<section><h4>Fixed Fields</h4>
<table>
<thead>
<tr>
<th>Field Name</th>
<th style="text-align:center">Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a id="overlayVersion"> </a>overlay</td>
<td style="text-align:center"><code>string</code></td>
<td><strong>REQUIRED</strong>. This string MUST be the <a href="#versions">version number</a> of the Overlay Specification that the Overlay document uses. The <code>overlay</code> field SHOULD be used by tooling to interpret the Overlay document.</td>
</tr>
<tr>
<td><a id="overlayInfo"> </a>info</td>
<td style="text-align:center"><a href="#infoObject">Info Object</a></td>
<td><strong>REQUIRED</strong>. Provides metadata about the Overlay. The metadata MAY be used by tooling as required.</td>
</tr>
<tr>
<td><a id="overlayExtends"> </a> extends</td>
<td style="text-align:center"><code>string</code></td>
<td>URL to an OpenAPI document this overlay applies to. This MUST be in the form of a URL.</td>
</tr>
<tr>
<td><a id="overlayUpdates"> </a>updates</td>
<td style="text-align:center">[<a href="#UpdateObject">Update Object</a>]</td>
<td><strong>REQUIRED</strong> An ordered list of update objects to be applied to the target document. The array MUST contain at least one value.</td>
</tr>
</tbody>
</table>
<p>*** This object MAY be extended with <a href="#specificationExtensions">Specification Extensions</a>.</p>
<p>The list of update objects MUST be applied in sequential order to ensure a consistent outcome. Updates are applied to the result of the previous updates. This enables objects to be deleted in one update and then re-created in a subsequent update, for example.</p>
<p>The <code>extends</code> property can be used to indicate that the Overlay was designed to update a specific OpenAPI description. Where no <code>extends</code> is provided it is the responsibility of tooling to apply the Overlay documents to the appropriate OpenAPI description.</p>
</section></section><section><h3><span id="infoObject">Info Object</span></h3>
<p>The object provides metadata about the Overlay.
The metadata MAY be used by the clients if needed.</p>
<section><h4>Fixed Fields</h4>
<table>
<thead>
<tr>
<th>Field Name</th>
<th style="text-align:center">Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a id="infoTitle"> </a>title</td>
<td style="text-align:center"><code>string</code></td>
<td><strong>REQUIRED</strong>. A human readable description of the purpose of the overlay.</td>
</tr>
<tr>
<td><a id="infoVersion"> </a>version</td>
<td style="text-align:center"><code>string</code></td>
<td><strong>REQUIRED</strong>. A version identifer for indicating changes to the Overlay document.</td>
</tr>
</tbody>
</table>
<p>*** This object MAY be extended with <a href="#specificationExtensions">Specification Extensions</a>.</p>
</section></section><section><h3><span id="updateObject">Update Object</span></h3>
<p>This object represents one or more changes to be applied to the target document at the location defined by the target JMESPath.</p>
<section><h4>Fixed Fields</h4>
<table>
<thead>
<tr>
<th>Field Name</th>
<th style="text-align:center">Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a id="updateTarget"> </a>target</td>
<td style="text-align:center"><code>string</code></td>
<td><strong>REQUIRED</strong> A JMESPath expression referencing the target objects in the target document.</td>
</tr>
<tr>
<td><a id="updateAdd"> </a>add</td>
<td style="text-align:center">Any</td>
<td>An object to be added as a child of the object(s) referenced by the <code>target</code>. Property has no impact if <code>remove</code> property is <code>true</code>.</td>
</tr>
<tr>
<td><a id="updateMerge"> </a>merge</td>
<td style="text-align:center">Any</td>
<td>An object with the properties and values to be merged with the object(s) referenced by the <code>target</code>. Property has no impact if <code>remove</code> property is <code>true</code>.</td>
</tr>
<tr>
<td><a id="updateRemove"> </a>remove</td>
<td style="text-align:center"><code>boolean</code></td>
<td>A boolean value that indicates that the target object is to be removed from the the map or array it is contained in. The default value is <code>false</code>.</td>
</tr>
</tbody>
</table>
<p>The properties of the merge object MUST be compatible with the target object referenced by the JMESPath key. When the Overlay document is applied, the properties in the merge object replace properties in the target object with the same name and new properties are appended to the target object.</p>
<p>*** This object MAY be extended with <a href="#specificationExtensions">Specification Extensions</a>.</p>
</section></section></section><section><h2>Examples</h2>
<section><h3>Structured Overlays Example</h3>
<p>When updating properties throughout the target document it may be more efficient to create a single <code>Update Object</code> that mirrors the structure of the target document. e.g.</p>
<pre class="nohighlight"><code>
<span class="hljs-attr">overlay:</span> <span class="hljs-number">1.0</span><span class="hljs-number">.0</span>
<span class="hljs-attr">info:</span>
  <span class="hljs-attr">title:</span> <span class="hljs-string">Structured</span> <span class="hljs-string">Overlay</span>
  <span class="hljs-attr">version:</span> <span class="hljs-number">1.0</span><span class="hljs-number">.0</span>
<span class="hljs-attr">updates:</span>
<span class="hljs-bullet">-</span> <span class="hljs-attr">target:</span> <span class="hljs-string">&quot;@&quot;</span>
  <span class="hljs-attr">merge:</span>
    <span class="hljs-attr">info:</span>
      <span class="hljs-attr">x-overlay-applied:</span> <span class="hljs-string">structured-overlay</span>
    <span class="hljs-attr">paths:</span>
      <span class="hljs-string">&quot;/&quot;</span><span class="hljs-string">:</span>
        <span class="hljs-attr">summary:</span> <span class="hljs-string">&quot;The root resource&quot;</span>
        <span class="hljs-attr">get:</span>
          <span class="hljs-attr">summary:</span> <span class="hljs-string">&quot;Retrieve the root resource&quot;</span>
          <span class="hljs-attr">x-rate-limit:</span> <span class="hljs-number">100</span>
      <span class="hljs-string">&quot;/pets&quot;</span><span class="hljs-string">:</span>
        <span class="hljs-attr">get:</span>
          <span class="hljs-attr">summary:</span> <span class="hljs-string">&quot;Retrieve a list of pets&quot;</span>
          <span class="hljs-attr">x-rate-limit:</span> <span class="hljs-number">100</span>
    <span class="hljs-attr">components:</span>
    <span class="hljs-attr">tags:</span>
</code></pre>
</section><section><h3>Targeted Overlays</h3>
<p>Alternatively, where only a small number of updates need to be applied to a large document, each <a href="#updateObject">Update Object</a> can be more targeted.</p>
<pre class="nohighlight"><code>
<span class="hljs-attr">overlay:</span> <span class="hljs-number">1.0</span><span class="hljs-number">.0</span>
<span class="hljs-attr">info:</span>
  <span class="hljs-attr">title:</span> <span class="hljs-string">Targeted</span> <span class="hljs-string">Overlays</span>
  <span class="hljs-attr">version:</span> <span class="hljs-number">1.0</span><span class="hljs-number">.0</span>
<span class="hljs-attr">updates:</span>
<span class="hljs-bullet">-</span> <span class="hljs-attr">target:</span> <span class="hljs-string">paths.&quot;/foo&quot;.get</span>
  <span class="hljs-attr">merge:</span>
    <span class="hljs-attr">description:</span> <span class="hljs-string">This</span> <span class="hljs-string">is</span> <span class="hljs-string">the</span> <span class="hljs-string">new</span> <span class="hljs-string">description</span>
<span class="hljs-bullet">-</span> <span class="hljs-attr">target:</span> <span class="hljs-string">paths.&quot;/bar&quot;.get</span>
  <span class="hljs-attr">merge:</span>
    <span class="hljs-attr">description:</span> <span class="hljs-string">This</span> <span class="hljs-string">is</span> <span class="hljs-string">the</span> <span class="hljs-string">updated</span> <span class="hljs-string">description</span>
<span class="hljs-bullet">-</span> <span class="hljs-attr">target:</span> <span class="hljs-string">paths.&quot;/bar&quot;</span>
  <span class="hljs-attr">merge:</span>
      <span class="hljs-attr">post:</span>
          <span class="hljs-attr">description:</span> <span class="hljs-string">This</span> <span class="hljs-string">is</span> <span class="hljs-string">an</span> <span class="hljs-string">updated</span> <span class="hljs-string">description</span> <span class="hljs-string">of</span> <span class="hljs-string">a</span> <span class="hljs-string">child</span> <span class="hljs-string">object</span>
          <span class="hljs-attr">x-safe:</span> <span class="hljs-literal">false</span>
</code></pre>
</section><section><h3>Wildcard Overlays Examples</h3>
<p>One significant advantage of using the JMESPath syntax that it allows referencing multiple nodes in the target document.  This would allow a single update object to be applied to multiple target objects using wildcards.</p>
<pre class="nohighlight"><code>
<span class="hljs-attr">overlay:</span> <span class="hljs-number">1.0</span><span class="hljs-number">.0</span>
<span class="hljs-attr">info:</span>
  <span class="hljs-attr">title:</span> <span class="hljs-string">Update</span> <span class="hljs-string">many</span> <span class="hljs-string">objects</span> <span class="hljs-string">at</span> <span class="hljs-string">once</span>
  <span class="hljs-attr">version:</span> <span class="hljs-number">1.0</span><span class="hljs-number">.0</span>
<span class="hljs-attr">updates:</span>
<span class="hljs-bullet">-</span> <span class="hljs-attr">target:</span> <span class="hljs-string">paths.*.get</span>
  <span class="hljs-attr">merge:</span>
    <span class="hljs-attr">x-safe:</span> <span class="hljs-literal">true</span>
<span class="hljs-bullet">-</span> <span class="hljs-attr">target:</span> <span class="hljs-string">paths.*.get.parameters[?name==&#x27;filter&#x27;</span> <span class="hljs-string">&amp;&amp;</span> <span class="hljs-string">in==&#x27;query&#x27;]</span>
  <span class="hljs-attr">merge:</span>
    <span class="hljs-attr">schema:</span>
      <span class="hljs-string">$ref:</span> <span class="hljs-string">&quot;/components/schemas/filterSchema&quot;</span>
</code></pre>
</section><section><h3>Array Modification Examples</h3>
<p>Due to the fact that we can now reference specific elements of the parameter array, it allows adding parameters. Parameters can be deleted using the <code>remove</code> property.  Use of indexes to remove array items should be avoided where possible as indexes will change when items are removed.</p>
<pre class="nohighlight"><code>
<span class="hljs-attr">overlay:</span> <span class="hljs-number">1.0</span><span class="hljs-number">.0</span>
<span class="hljs-attr">info:</span>
  <span class="hljs-attr">title:</span> <span class="hljs-string">Add</span> <span class="hljs-string">an</span> <span class="hljs-string">array</span> <span class="hljs-string">element</span>
  <span class="hljs-attr">version:</span> <span class="hljs-number">1.0</span><span class="hljs-number">.0</span>
<span class="hljs-attr">updates:</span>
<span class="hljs-bullet">-</span> <span class="hljs-attr">target:</span> <span class="hljs-string">paths.*.get.parameters</span>
  <span class="hljs-attr">add:</span>
    <span class="hljs-attr">name:</span> <span class="hljs-string">newParam</span>
    <span class="hljs-attr">in:</span> <span class="hljs-string">query</span>
</code></pre>
<pre class="nohighlight"><code>
<span class="hljs-attr">overlay:</span> <span class="hljs-number">1.0</span><span class="hljs-number">.0</span>
<span class="hljs-attr">info:</span>
  <span class="hljs-attr">title:</span> <span class="hljs-string">Remove</span> <span class="hljs-string">a</span> <span class="hljs-string">array</span> <span class="hljs-string">element</span>
  <span class="hljs-attr">version:</span> <span class="hljs-number">1.0</span><span class="hljs-number">.0</span>
<span class="hljs-attr">updates:</span>
<span class="hljs-bullet">-</span> <span class="hljs-attr">target:</span> <span class="hljs-string">paths[*].get.parameters[?</span> <span class="hljs-string">name</span> <span class="hljs-string">==</span> <span class="hljs-string">&#x27;dummy&#x27;</span><span class="hljs-string">]</span>
  <span class="hljs-attr">remove:</span> <span class="hljs-literal">true</span>
</code></pre>
</section><section><h3>Traits Examples</h3>
<p>By annotating an OpenAPI description using extension such as <code>x-oai-traits</code> an author of OpenAPI description can identify where overlay updates should be applied.</p>
<pre class="nohighlight"><code>
<span class="hljs-attr">openapi:</span> <span class="hljs-number">3.1</span><span class="hljs-number">.0</span>
<span class="hljs-attr">info:</span>
  <span class="hljs-attr">title:</span> <span class="hljs-string">Api</span> <span class="hljs-string">with</span> <span class="hljs-string">a</span> <span class="hljs-string">paged</span> <span class="hljs-string">collection</span>
  <span class="hljs-attr">version:</span> <span class="hljs-number">1.0</span><span class="hljs-number">.0</span>
<span class="hljs-attr">paths:</span>
  <span class="hljs-string">/items:</span>
    <span class="hljs-attr">get:</span>
      <span class="hljs-attr">x-oai-traits:</span> [<span class="hljs-string">&quot;paged&quot;</span>]
      <span class="hljs-attr">responses:</span>
        <span class="hljs-attr">200:</span>
          <span class="hljs-attr">description:</span> <span class="hljs-string">OK</span>
</code></pre>
<p>With the above OpenAPI description, following Overlay document will apply the necessary updates to describe how paging is implemented, where that trait has been applied.</p>
<pre class="nohighlight"><code>
<span class="hljs-attr">overlay:</span> <span class="hljs-number">1.0</span><span class="hljs-number">.0</span>
<span class="hljs-attr">info:</span>
  <span class="hljs-attr">title:</span> <span class="hljs-string">Apply</span> <span class="hljs-string">Traits</span>
  <span class="hljs-attr">version:</span> <span class="hljs-number">1.0</span><span class="hljs-number">.0</span>
<span class="hljs-attr">updates:</span>
<span class="hljs-bullet">-</span> <span class="hljs-attr">target:</span> <span class="hljs-string">$.paths[*].get[?contains(x-traits,&#x27;paged&#x27;)]</span>
  <span class="hljs-attr">merge:</span>
    <span class="hljs-attr">parameters:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">top</span>
        <span class="hljs-attr">in:</span> <span class="hljs-string">query</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">skip</span>
        <span class="hljs-attr">in:</span> <span class="hljs-string">query</span>
</code></pre>
<p>This approach allows flipping control of where Overlays apply updates to the OpenAPI description itself.</p>
</section></section><section><h2><span id="specificationExtensions">Specification Extensions</span></h2>
<p>While the OpenAPI Specification tries to accommodate most use cases, additional data can be added to extend the specification at certain points.</p>
<p>The extensions properties are implemented as patterned fields that are always prefixed by <code>&quot;x-&quot;</code>.</p>
<table>
<thead>
<tr>
<th>Field Pattern</th>
<th style="text-align:center">Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a id="infoExtensions"> </a>^x-</td>
<td style="text-align:center">Any</td>
<td>Allows extensions to the OpenAPI Schema. The field name MUST begin with <code>x-</code>, for example, <code>x-internal-id</code>. Field names beginning <code>x-oai-</code> and <code>x-oas-</code> are reserved for uses defined by the <a href="https://www.openapis.org/">OpenAPI Initiative</a>. The value can be <code>null</code>, a primitive, an array or an object.</td>
</tr>
</tbody>
</table>
<p>The extensions may or may not be supported by the available tooling, but those may be extended as well to add requested support (if tools are internal or open-sourced).</p>
</section></section><section><h1><span id="revisionHistory">Appendix A: Revision History</span></h1>
<p>1.0       | TBD | First release of the Overlay Specification</p>

